<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logged In</title>
</head>
<body>

    <h1>You are logged in!</h1>

    <h2>Name: <span id="userName">Loading...</span></h2>
    <h2>Email: <span id="userEmail">Loading...</span></h2>
    <h2>UID: <span id="userUID">Loading...</span></h2>

    <button id="logoutBtn">Logout</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB8c8TZsDsgZaQx3t4DWm8x3e0QZHVbj0A",
            authDomain: "te4-nobel-quests.firebaseapp.com",
            projectId: "te4-nobel-quests",
            storageBucket: "te4-nobel-quests.firebasestorage.app",
            messagingSenderId: "1098687895626",
            appId: "1:1098687895626:web:bb4459a0ac7890792c6eb3",
            measurementId: "G-XPPM9PF0TW"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Check if user is logged in
        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('userName').textContent = user.displayName || "No name set";
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userUID').textContent = user.uid;
            } else {
                // Not logged in â†’ go back to login
                window.location.href = "test.html"; 
            }
        });

        // Logout button
        document.getElementById("logoutBtn").addEventListener("click", () => {
            signOut(auth).then(() => {
                window.location.href = "test.html";
            });
        });
    </script>

</body>
</html>
